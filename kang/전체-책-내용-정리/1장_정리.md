# 1장 - 리팩터링 리팩터링하기

---

> 이 장에서 다룰 내용
>
> 1. 리팩터링 구성 요소 이해
> 2. 일상 업무에 리팩터링 도입
> 3. 리팩터링에 있어 안전의 중요성
> 4. 1부의 핵심 예제 소개

### 리팩터링이 필요한 이유

- 코드를 더 빠르게 만들기 위해
- 더 작은 코드를 만들기 위해
- 코드를 더 일반적이거나 **재사용 가능**하게 하기 위해
- 코드의 **가독성을 높이고** 유지보수를 용이하게 하기 위해

> 좋은 코드의 정의
>
- 사람이 읽기 쉽고, 유지보수가 용이하며, 의도한 대로 잘 동작하는 코드

> 리팩터링 정의
>
- 기능을 변경하지 않고 코드의 가독성과 유지보수가 쉽도록 코드를 변경하는 것

> 대부분의 프로그래머는 코드를 작성하는 것보다 **코드를 읽고 이해하는 데 많은 시간을 보낸다**.
>
- 따라서, 코드베이스의 가독성을 높이면 새로운 기능을 구현하기 쉽고,
- 유지보수가 용이해지면 버그가 줄어들고 수정이 쉬워진다.
- 또한, 좋은 코드베이스는 생각하기 편하다.
- 이와 같은 이유로 리팩터링이 필요하다.

### 리팩터링 대상

- **코드 스멜**을 제거해야 한다.
    - 코드  스멜 : 코드가 나쁘다는 것을 암시하는 것이다. (ex, 여러가지 작업을 하는 함수)
- 레거시 시스템에서 리팩터링을 할 경우
    - ***변경하기 쉽게 만든 후 변경 - 켄트 백***
    - 레거시 시스템에서 전체를 리팩터링 하는 것보다 신규 기능이 추가될 때 새 코드를 쉽게 추가할 수 있게 부분적으로 리팩터링 적용 → 이야기 해보기

### 리팩터링을 하지 말아야 하는 순간

1. 한 번 실행하고 삭제할 코드 ([eXtreme Programming](https://ko.wikipedia.org/wiki/%EC%9D%B5%EC%8A%A4%ED%8A%B8%EB%A6%BC_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D) 커뮤니티에서 **스파이크**)
2. 폐기되기 전 유지보수 모드에 있는 코드
3. 엄격한 성능 요구사항이 있는 코드

## 요약

- 리팩터링을 수행하려면 리팩터링 대상을 식별하는 스킬과 리팩터링 단계를 명시적으로 가진 문화, 리팩터링을 돕는 도구의 조합이 필요하다.
- 자동화된 테스트와 리팩터링을 별도로 학습하면 진입 장벽을 낮출 수 있다.
    - 만약, 자동화된 테스트가 없다면 컴팡일러, 버전 관리 및 수동 테스트를 사용해야 한다.

## 추가 (읽어 볼 만한)

- **리팩터링 중 금지**해야 될 사항 (리팩터링 2판)
    1. 기능 변경/추가 금지
    2. 버그 수정 금지
    3. 성능 개선 금지
    4. 버전 업데이트 금지
- https://refactoring.guru/refactoring/techniques
- [https://files.gotocon.com/uploads/slides/conference_51/2056/original/GOTO Five talks of code (1).pdf](https://files.gotocon.com/uploads/slides/conference_51/2056/original/GOTO%20Five%20talks%20of%20code%20%281%29.pdf)
- [https://mjspring.medium.com/리팩터링-2판-chapter-01-리팩터링-첫-번째-예시-2-134101efd141](https://mjspring.medium.com/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-2%ED%8C%90-chapter-01-%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B2%AB-%EB%B2%88%EC%A7%B8-%EC%98%88%EC%8B%9C-2-134101efd141)
- https://youtu.be/KEv4N6vvUZw?si=KX0at2yeH5t89XRW